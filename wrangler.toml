name = "telegraph-image"
compatibility_date = "2024-12-01"
pages_build_output_dir = "./dist"

# 兼容性标志 - nodejs_compat 在 2024-09-23 后自动启用 v2 功能
compatibility_flags = ["nodejs_compat"]

# 全局环境变量（开发和生产环境通用）
[vars]
# Telegram 配置（必需）- 请在 Cloudflare Pages 后台设置实际值
TG_Bot_Token = "YOUR_TELEGRAM_BOT_TOKEN_HERE"
TG_Chat_ID = "YOUR_TELEGRAM_CHAT_ID_HERE"

# 内容审查配置（可选）
ModerateContentApiKey = ""

# 管理员认证配置（可选）
BASIC_USER = ""
BASIC_PASS = ""

# 功能开关（可选）
WhiteList_Mode = "false"
disable_telemetry = "false"

# Sentry 监控配置（可选）
SENTRY_DSN = ""

# 存储提供者选择：telegram, r2, s3（默认 telegram）
STORAGE_PROVIDER = "telegram"

# S3 兼容存储配置（当 STORAGE_PROVIDER = "s3"）
S3_ENDPOINT = ""
S3_BUCKET = ""
S3_ACCESS_KEY_ID = ""
S3_SECRET_ACCESS_KEY = ""
S3_REGION = "auto"

# 生产环境配置
[env.production.vars]
COMPRESS_STATIC_ASSETS = "true"

# 开发环境配置
[env.development.vars]
COMPRESS_STATIC_ASSETS = "false"
# 开发环境可以使用测试值
TG_Bot_Token = "123456789:ABCdefGHIjklMNOpqrSTUvwxYZ"
TG_Chat_ID = "-1001234567890"
BASIC_USER = "admin"
BASIC_PASS = "123456"

# =============================================
# KV 命名空间配置
# 通过 wrangler kv namespace create 创建
# =============================================

[[kv_namespaces]]
binding = "img_url"
id = "7bedbd0e77b64e548b280114c38a5541"

[[kv_namespaces]]
binding = "WEBHOOKS_KV"
id = "6ae427ac8290406684dcabf2ca4babac"

[[kv_namespaces]]
binding = "WEBHOOK_LOGS_KV"
id = "0346979ddffe4b2da2a7ea7e05133167"

# =============================================
# Cloudflare R2 存储配置
# 当 STORAGE_PROVIDER = "r2" 时启用
# 通过 wrangler r2 bucket create 创建
# =============================================

[[r2_buckets]]
binding = "R2_BUCKET"
bucket_name = "kk-image-storage"
