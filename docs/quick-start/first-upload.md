# 首次上传教程

完成部署后，让我们验证 Telegraph-Image 的核心功能是否正常工作。

## 🎯 测试目标

本教程将帮助您：
- ✅ 验证图片上传功能
- ✅ 确认图片访问正常
- ✅ 测试后台管理功能
- ✅ 检查基本配置

## 📋 准备工作

在开始测试前，请确保：
- [x] 已完成 [安装部署指南](installation.md) 中的所有步骤
- [x] Cloudflare Pages 部署成功
- [x] 环境变量配置正确
- [x] 可以正常访问项目域名

## 🚀 功能测试步骤

### 步骤 1: 访问上传页面

1. 打开浏览器，访问您的项目域名
   ```
   https://your-project-name.pages.dev
   ```

2. 您应该看到 Telegraph-Image 的主页面，包含：
   - 项目标题和描述
   - 文件上传区域
   - 上传按钮

### 步骤 2: 测试图片上传

#### 2.1 选择测试图片

准备一张测试图片，建议：
- **格式**: JPG、PNG、GIF、WebP
- **大小**: 小于 5MB
- **内容**: 适合的测试图片

#### 2.2 执行上传

1. 点击上传区域或拖拽图片到上传区域
2. 选择您的测试图片
3. 点击 **上传** 按钮
4. 等待上传完成

#### 2.3 验证上传结果

上传成功后，您应该看到：
- ✅ 上传成功的提示信息
- ✅ 生成的图片链接
- ✅ 图片预览（如果页面支持）

示例返回结果：
```json
[
  {
    "src": "/file/AgACAgEAAxkDAAMDZt1Gzs4W8dQPWiQJxO5YSH5X-gsAAt-sMRuWNelGOSaEM_9lHHgBAAMCAANtAAM2BA.png"
  }
]
```

### 步骤 3: 测试图片访问

#### 3.1 直接访问测试

1. 复制上传返回的图片链接
2. 在新标签页中打开完整链接：
   ```
   https://your-project-name.pages.dev/file/AgACAgEAAxkDAAMDZt1Gzs4W8dQPWiQJxO5YSH5X-gsAAt-sMRuWNelGOSaEM_9lHHgBAAMCAANtAAM2BA.png
   ```
3. 确认图片能正常显示

#### 3.2 嵌入测试

测试图片在其他网站中的嵌入效果：

**HTML 嵌入**:
```html
<img src="https://your-project-name.pages.dev/file/your-image-id.png" alt="Test Image">
```

**Markdown 嵌入**:
```markdown
![Test Image](https://your-project-name.pages.dev/file/your-image-id.png)
```

### 步骤 4: 测试后台管理（可选）

如果您配置了后台管理功能：

#### 4.1 访问后台

1. 访问后台管理页面：
   ```
   https://your-project-name.pages.dev/admin
   ```

2. 如果配置了登录验证，输入用户名和密码

#### 4.2 验证管理功能

在后台页面中验证：
- ✅ 可以看到上传的图片列表
- ✅ 图片信息显示正确（文件名、大小、时间戳）
- ✅ 可以执行基本操作（预览、复制链接等）

#### 4.3 测试不同视图

尝试切换不同的管理视图：
- **列表视图**: `/admin`
- **网格视图**: `/admin-imgtc.html`
- **瀑布流视图**: `/admin-waterfall.html`

## 🔍 故障排除

### 上传失败

**症状**: 上传时返回错误或无响应

**可能原因和解决方案**:

1. **Telegram Bot 配置错误**
   ```bash
   # 检查环境变量
   TG_Bot_Token: 格式应为 123456789:ABCdefGHI...
   TG_Chat_ID: 应为负数，如 -1001234567890
   ```

2. **Bot 权限不足**
   - 确认 Bot 已添加为频道管理员
   - 检查 Bot 是否有发送消息权限

3. **文件格式或大小问题**
   - 确认文件小于 5MB
   - 支持的格式：图片、音频、视频、文档

### 图片无法访问

**症状**: 上传成功但图片链接无法打开

**可能原因和解决方案**:

1. **部署未完成**
   - 检查 Cloudflare Pages 部署状态
   - 等待部署完全完成

2. **环境变量未生效**
   - 修改环境变量后需要重新部署
   - 在 Pages 控制台手动触发重新部署

### 后台无法访问

**症状**: 访问 `/admin` 返回 404 或错误

**可能原因和解决方案**:

1. **KV 存储未配置**
   - 后台管理需要 KV 存储支持
   - 按照安装指南配置 KV 命名空间绑定

2. **登录验证配置错误**
   - 检查 `BASIC_USER` 和 `BASIC_PASS` 环境变量
   - 确认用户名密码正确

## ✅ 测试检查清单

完成以下检查项，确保系统正常运行：

### 基础功能
- [ ] 主页可以正常访问
- [ ] 图片上传功能正常
- [ ] 上传后返回正确的链接格式
- [ ] 图片链接可以正常访问
- [ ] 图片在浏览器中正确显示

### 高级功能（如已配置）
- [ ] 后台管理页面可以访问
- [ ] 登录验证功能正常
- [ ] 图片列表显示正确
- [ ] 不同视图模式可以切换
- [ ] 图片管理操作正常

### 性能测试
- [ ] 图片上传速度合理（通常 < 10秒）
- [ ] 图片访问速度快（通常 < 3秒）
- [ ] 多张图片上传测试正常

## 📊 测试数据记录

建议记录测试结果：

```
测试时间: ___________
项目域名: ___________
测试图片: ___________
上传耗时: ___________
访问速度: ___________
功能状态: ___________
```

## 🔗 下一步

测试完成后，您可以：

- **[用户手册](../user-manual/README.md)** - 了解更多使用技巧
- **[管理员手册](../admin-manual/README.md)** - 配置高级功能
- **[API 文档](../api-docs/README.md)** - 集成到其他应用

## 💡 使用建议

1. **定期测试**: 建议每周测试一次核心功能
2. **监控使用量**: 关注 Cloudflare 的使用量统计
3. **备份配置**: 记录重要的配置信息
4. **关注更新**: 定期检查项目更新

---

🎉 **恭喜！** 您已成功验证 Telegraph-Image 的功能，现在可以正式使用了！
