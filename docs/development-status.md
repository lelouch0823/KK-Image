# Telegraph-Image å¼€å‘çŠ¶æ€æŠ¥å‘Š

## é¡¹ç›®å½“å‰çŠ¶æ€

**é¡¹ç›®ç‰ˆæœ¬**: 2.0.0  
**æœ€åæ›´æ–°**: 2025-07-07  
**å¼€å‘é˜¶æ®µ**: ç¬¬äºŒé˜¶æ®µå®Œæˆï¼Œç¬¬ä¸‰é˜¶æ®µè§„åˆ’ä¸­  

## å®Œæˆæƒ…å†µæ€»è§ˆ

### âœ… å·²å®Œæˆçš„ä¸»è¦åŠŸèƒ½

#### ç¬¬ä¸€é˜¶æ®µï¼šæ ¸å¿ƒæŠ€æœ¯å‡çº§ï¼ˆ100% å®Œæˆï¼‰
- [x] **Vue.js 2.x â†’ 3.x å‡çº§**: å®Œæ•´çš„æ¡†æ¶å‡çº§å’Œç»„ä»¶è¿ç§»
- [x] **Element UI â†’ Element Plus**: UI ç»„ä»¶åº“ç°ä»£åŒ–å‡çº§
- [x] **Vite æ„å»ºç³»ç»Ÿ**: æ›¿æ¢ä¼ ç»Ÿæ„å»ºå·¥å…·ï¼Œæå‡å¼€å‘æ•ˆç‡
- [x] **æ‹–æ‹½ä¸Šä¼ åŠŸèƒ½**: ç°ä»£åŒ–çš„æ–‡ä»¶ä¸Šä¼ ä½“éªŒ
- [x] **ç®¡ç†ç»Ÿè®¡åˆ†æ**: å®Œæ•´çš„æ•°æ®ç»Ÿè®¡å’Œå¯è§†åŒ–

#### ç¬¬äºŒé˜¶æ®µï¼šAPI æ‰©å±•å’Œ Webhook æ”¯æŒï¼ˆ100% å®Œæˆï¼‰
- [x] **RESTful API ç³»ç»Ÿ**: æ ‡å‡†åŒ–çš„ API æ¥å£è®¾è®¡
- [x] **JWT è®¤è¯ç³»ç»Ÿ**: å®‰å…¨çš„èº«ä»½éªŒè¯æœºåˆ¶
- [x] **API Key ç®¡ç†**: ç¬¬ä¸‰æ–¹é›†æˆæ”¯æŒ
- [x] **Webhook äº‹ä»¶ç³»ç»Ÿ**: å®Œæ•´çš„äº‹ä»¶é€šçŸ¥æœºåˆ¶
- [x] **API æ–‡æ¡£å’Œæµ‹è¯•**: å…¨é¢çš„æ–‡æ¡£å’Œæµ‹è¯•è¦†ç›–

### ğŸ”§ æŠ€æœ¯æ¶æ„å‡çº§

#### å‰ç«¯æŠ€æœ¯æ ˆ
- **Vue.js 3.x** + **Composition API**: ç°ä»£åŒ–çš„å‰ç«¯å¼€å‘
- **Element Plus**: ä¼ä¸šçº§ UI ç»„ä»¶åº“
- **Vite**: å¿«é€Ÿçš„å¼€å‘æ„å»ºå·¥å…·
- **TypeScript æ”¯æŒ**: ç±»å‹å®‰å…¨çš„å¼€å‘ä½“éªŒ

#### åç«¯æŠ€æœ¯æ ˆ
- **Cloudflare Pages**: å…¨çƒ CDN åŠ é€Ÿ
- **Cloudflare Workers**: è¾¹ç¼˜è®¡ç®—æœåŠ¡
- **Cloudflare KV**: é«˜æ€§èƒ½é”®å€¼å­˜å‚¨
- **Webhook ç³»ç»Ÿ**: äº‹ä»¶é©±åŠ¨æ¶æ„

#### å¼€å‘å·¥å…·é“¾
- **Wrangler 4.23.0+**: æœ€æ–°çš„å¼€å‘å·¥å…·
- **Mocha æµ‹è¯•æ¡†æ¶**: å®Œæ•´çš„æµ‹è¯•è¦†ç›–
- **ESLint + Prettier**: ä»£ç è´¨é‡ä¿è¯
- **Git Hooks**: è‡ªåŠ¨åŒ–ä»£ç æ£€æŸ¥

## æ ¸å¿ƒåŠŸèƒ½è¯¦æƒ…

### ğŸ¯ ç”¨æˆ·åŠŸèƒ½
1. **æ–‡ä»¶ä¸Šä¼ **
   - æ‹–æ‹½ä¸Šä¼ æ”¯æŒ
   - æ‰¹é‡æ–‡ä»¶å¤„ç†
   - å®æ—¶ä¸Šä¼ è¿›åº¦
   - æ–‡ä»¶ç±»å‹éªŒè¯

2. **æ–‡ä»¶ç®¡ç†**
   - æ–‡ä»¶åˆ—è¡¨æŸ¥çœ‹
   - æ–‡ä»¶ä¿¡æ¯ç¼–è¾‘
   - æ‰¹é‡æ“ä½œæ”¯æŒ
   - æ–‡ä»¶æœç´¢è¿‡æ»¤

3. **åˆ†äº«åŠŸèƒ½**
   - ç›´é“¾åˆ†äº«
   - åµŒå…¥ä»£ç ç”Ÿæˆ
   - è®¿é—®ç»Ÿè®¡
   - åˆ†äº«æƒé™æ§åˆ¶

### ğŸ” ç®¡ç†åŠŸèƒ½
1. **ç”¨æˆ·ç®¡ç†**
   - ç”¨æˆ·è´¦æˆ·ç®¡ç†
   - æƒé™åˆ†é…
   - è®¿é—®æ§åˆ¶
   - æ“ä½œæ—¥å¿—

2. **ç³»ç»Ÿç›‘æ§**
   - å®æ—¶ç»Ÿè®¡ä»ªè¡¨æ¿
   - å­˜å‚¨ä½¿ç”¨åˆ†æ
   - è®¿é—®é‡ç»Ÿè®¡
   - æ€§èƒ½ç›‘æ§

3. **é…ç½®ç®¡ç†**
   - ç³»ç»Ÿå‚æ•°é…ç½®
   - ç¯å¢ƒå˜é‡ç®¡ç†
   - å®‰å…¨è®¾ç½®
   - å¤‡ä»½æ¢å¤

### ğŸ”Œ API åŠŸèƒ½
1. **RESTful API**
   - æ ‡å‡†åŒ–æ¥å£è®¾è®¡
   - å®Œæ•´çš„ CRUD æ“ä½œ
   - åˆ†é¡µå’Œè¿‡æ»¤æ”¯æŒ
   - é”™è¯¯å¤„ç†æœºåˆ¶

2. **è®¤è¯æˆæƒ**
   - JWT Token è®¤è¯
   - API Key ç®¡ç†
   - æƒé™çº§åˆ«æ§åˆ¶
   - å®‰å…¨å®¡è®¡

3. **Webhook ç³»ç»Ÿ**
   - äº‹ä»¶é€šçŸ¥æœºåˆ¶
   - ç­¾åéªŒè¯
   - é‡è¯•æœºåˆ¶
   - æ—¥å¿—è®°å½•

## æ–‡ä»¶ç»“æ„

```
Telegraph-Image/
â”œâ”€â”€ ğŸ“ src/                     # Vue.js å‰ç«¯æºç 
â”‚   â”œâ”€â”€ ğŸ“ components/          # Vue ç»„ä»¶
â”‚   â”œâ”€â”€ ğŸ“ composables/         # Composition API é€»è¾‘
â”‚   â””â”€â”€ ğŸ“ assets/              # é™æ€èµ„æº
â”œâ”€â”€ ğŸ“ functions/               # Cloudflare Workers å‡½æ•°
â”‚   â”œâ”€â”€ ğŸ“ api/                 # API ç«¯ç‚¹
â”‚   â”‚   â”œâ”€â”€ ğŸ“ v1/              # API v1 ç‰ˆæœ¬
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ auth/        # è®¤è¯ç›¸å…³
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ files.js     # æ–‡ä»¶ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ webhooks.js  # Webhook ç®¡ç†
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ ...          # å…¶ä»– API
â”‚   â”‚   â””â”€â”€ ğŸ“ utils/           # API å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ ğŸ“„ upload.js            # æ–‡ä»¶ä¸Šä¼ å¤„ç†
â”‚   â””â”€â”€ ğŸ“„ _middleware.js       # ä¸­é—´ä»¶
â”œâ”€â”€ ğŸ“ docs/                    # é¡¹ç›®æ–‡æ¡£
â”‚   â”œâ”€â”€ ğŸ“ api/                 # API æ–‡æ¡£
â”‚   â”œâ”€â”€ ğŸ“ user-manual/         # ç”¨æˆ·æ‰‹å†Œ
â”‚   â”œâ”€â”€ ğŸ“ deployment/          # éƒ¨ç½²æŒ‡å—
â”‚   â””â”€â”€ ğŸ“„ README.md            # é¡¹ç›®è¯´æ˜
â”œâ”€â”€ ğŸ“ test/                    # æµ‹è¯•æ–‡ä»¶
â”‚   â”œâ”€â”€ ğŸ“„ api.test.js          # API æµ‹è¯•
â”‚   â”œâ”€â”€ ğŸ“„ webhook-test.js      # Webhook æµ‹è¯•
â”‚   â””â”€â”€ ğŸ“„ test.js              # åŸºç¡€æµ‹è¯•
â”œâ”€â”€ ğŸ“ scripts/                 # å·¥å…·è„šæœ¬
â”‚   â””â”€â”€ ğŸ“„ deploy-check.js      # éƒ¨ç½²éªŒè¯
â”œâ”€â”€ ğŸ“„ wrangler.toml            # Cloudflare é…ç½®
â”œâ”€â”€ ğŸ“„ package.json             # é¡¹ç›®é…ç½®
â”œâ”€â”€ ğŸ“„ vite.config.js           # Vite é…ç½®
â””â”€â”€ ğŸ“„ README.md                # é¡¹ç›®è¯´æ˜
```

## é…ç½®å’Œç¯å¢ƒ

### ç¯å¢ƒå˜é‡é…ç½®
```toml
# wrangler.toml å…³é”®é…ç½®
[vars]
BASIC_USER = "admin"
BASIC_PASS = "your-password"
TG_Bot_Token = "your-telegram-bot-token"
TG_Chat_ID = "your-telegram-chat-id"
WhiteList_Mode = "false"
disable_telemetry = "false"
ModerateContentApiKey = ""

[[kv_namespaces]]
binding = "img_url"
id = "your-kv-namespace-id"

[[kv_namespaces]]
binding = "WEBHOOKS_KV"
id = "your-webhooks-kv-id"

[[kv_namespaces]]
binding = "WEBHOOK_LOGS_KV"
id = "your-webhook-logs-kv-id"
```

### å¼€å‘è„šæœ¬
```json
{
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "preview": "vite preview",
    "test": "mocha",
    "test:webhook": "node test/webhook-test.js",
    "ci-test": "concurrently --kill-others --success first \"npm run start\" \"wait-on http://localhost:8080 && mocha --exit\"",
    "start": "npx wrangler pages dev dist --binding BASIC_USER=admin --binding BASIC_PASS=123 --port 8080 --persist-to ./data",
    "deploy": "npm run build && wrangler pages deploy dist",
    "deploy:check": "node scripts/deploy-check.js",
    "deploy:verify": "npm run build && npm run start & sleep 5 && npm run deploy:check && pkill -f wrangler"
  }
}
```

## æµ‹è¯•è¦†ç›–

### è‡ªåŠ¨åŒ–æµ‹è¯•
- âœ… **API åŠŸèƒ½æµ‹è¯•**: å®Œæ•´çš„ API ç«¯ç‚¹æµ‹è¯•
- âœ… **è®¤è¯ç³»ç»Ÿæµ‹è¯•**: JWT å’Œ API Key è®¤è¯æµ‹è¯•
- âœ… **Webhook æµ‹è¯•**: äº‹ä»¶é€šçŸ¥å’Œç­¾åéªŒè¯æµ‹è¯•
- âœ… **é›†æˆæµ‹è¯•**: ç«¯åˆ°ç«¯åŠŸèƒ½æµ‹è¯•
- âœ… **éƒ¨ç½²éªŒè¯**: è‡ªåŠ¨åŒ–éƒ¨ç½²æ£€æŸ¥

### æµ‹è¯•å‘½ä»¤
```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm test

# è¿è¡Œ Webhook ä¸“é¡¹æµ‹è¯•
npm run test:webhook

# è¿è¡Œé›†æˆæµ‹è¯•ï¼ˆéœ€è¦æœåŠ¡å™¨è¿è¡Œï¼‰
npm run ci-test

# éƒ¨ç½²éªŒè¯
npm run deploy:check

# å®Œæ•´éƒ¨ç½²éªŒè¯
npm run deploy:verify
```

## æ€§èƒ½æŒ‡æ ‡

### å‰ç«¯æ€§èƒ½
- **é¦–å±åŠ è½½æ—¶é—´**: < 2s
- **èµ„æºå‹ç¼©ç‡**: > 70%
- **ç¼“å­˜å‘½ä¸­ç‡**: > 90%
- **ä»£ç åˆ†å‰²**: æŒ‰éœ€åŠ è½½

### åç«¯æ€§èƒ½
- **API å“åº”æ—¶é—´**: < 200ms
- **æ–‡ä»¶ä¸Šä¼ é€Ÿåº¦**: å–å†³äºç½‘ç»œå’Œæ–‡ä»¶å¤§å°
- **å…¨çƒ CDN**: Cloudflare å…¨çƒèŠ‚ç‚¹
- **è¾¹ç¼˜è®¡ç®—**: Workers è¾¹ç¼˜å¤„ç†

## å®‰å…¨ç‰¹æ€§

### è®¤è¯å’Œæˆæƒ
- **å¤šå±‚è®¤è¯**: Basic Auth + JWT + API Key
- **æƒé™æ§åˆ¶**: ç»†ç²’åº¦æƒé™ç®¡ç†
- **ä¼šè¯ç®¡ç†**: å®‰å…¨çš„ä¼šè¯å¤„ç†
- **å®¡è®¡æ—¥å¿—**: å®Œæ•´çš„æ“ä½œè®°å½•

### æ•°æ®ä¿æŠ¤
- **ç¯å¢ƒå˜é‡**: æ•æ„Ÿä¿¡æ¯å®‰å…¨å­˜å‚¨
- **ç­¾åéªŒè¯**: Webhook HMAC-SHA256 ç­¾å
- **è¾“å…¥éªŒè¯**: ä¸¥æ ¼çš„è¾“å…¥éªŒè¯å’Œè¿‡æ»¤
- **é”™è¯¯å¤„ç†**: å®‰å…¨çš„é”™è¯¯ä¿¡æ¯å¤„ç†

## éƒ¨ç½²çŠ¶æ€

### ç”Ÿäº§ç¯å¢ƒå°±ç»ª
- âœ… **ä»£ç è´¨é‡**: ESLint + Prettier æ£€æŸ¥é€šè¿‡
- âœ… **æµ‹è¯•è¦†ç›–**: æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½æµ‹è¯•é€šè¿‡
- âœ… **æ–‡æ¡£å®Œæ•´**: ç”¨æˆ·å’Œå¼€å‘æ–‡æ¡£é½å…¨
- âœ… **é…ç½®éªŒè¯**: ç¯å¢ƒé…ç½®æ£€æŸ¥é€šè¿‡
- âœ… **æ€§èƒ½ä¼˜åŒ–**: å‰åç«¯æ€§èƒ½ä¼˜åŒ–å®Œæˆ

### éƒ¨ç½²æ£€æŸ¥æ¸…å•
- [ ] ç¯å¢ƒå˜é‡é…ç½®
- [ ] KV å‘½åç©ºé—´åˆ›å»º
- [ ] Telegram Bot é…ç½®
- [ ] åŸŸåå’Œ SSL é…ç½®
- [ ] ç›‘æ§å’Œæ—¥å¿—é…ç½®

## ä¸‹ä¸€æ­¥è®¡åˆ’

### ç¬¬ä¸‰é˜¶æ®µï¼šç”Ÿæ€å»ºè®¾ï¼ˆè§„åˆ’ä¸­ï¼‰
1. **SDK å¼€å‘**
   - JavaScript/Node.js SDK
   - Python SDK
   - Go SDK
   - å…¶ä»–è¯­è¨€æ”¯æŒ

2. **ç¬¬ä¸‰æ–¹é›†æˆ**
   - GitHub Actions é›†æˆ
   - CI/CD å·¥å…·æ”¯æŒ
   - äº‘å­˜å‚¨åŒæ­¥
   - ç¤¾äº¤åª’ä½“åˆ†äº«

3. **ä¼ä¸šçº§åŠŸèƒ½**
   - å¤šç§Ÿæˆ·æ”¯æŒ
   - é«˜çº§æƒé™ç®¡ç†
   - ä¼ä¸šçº§ç›‘æ§
   - æ•°æ®å¤‡ä»½å’Œæ¢å¤

4. **æ€§èƒ½å’Œæ‰©å±•**
   - ç¼“å­˜ä¼˜åŒ–
   - æ•°æ®åº“ä¼˜åŒ–
   - è´Ÿè½½å‡è¡¡
   - è‡ªåŠ¨æ‰©ç¼©å®¹

## ç»´æŠ¤å’Œæ”¯æŒ

### ç‰ˆæœ¬ç®¡ç†
- **è¯­ä¹‰åŒ–ç‰ˆæœ¬**: éµå¾ª SemVer è§„èŒƒ
- **å˜æ›´æ—¥å¿—**: è¯¦ç»†çš„ç‰ˆæœ¬å˜æ›´è®°å½•
- **å‘åå…¼å®¹**: API ç‰ˆæœ¬å…¼å®¹æ€§ä¿è¯
- **å‡çº§æŒ‡å—**: è¯¦ç»†çš„å‡çº§è¯´æ˜

### ç¤¾åŒºæ”¯æŒ
- **æ–‡æ¡£ç»´æŠ¤**: æŒç»­æ›´æ–°æ–‡æ¡£
- **é—®é¢˜è·Ÿè¸ª**: GitHub Issues ç®¡ç†
- **åŠŸèƒ½è¯·æ±‚**: ç¤¾åŒºåé¦ˆæ”¶é›†
- **è´¡çŒ®æŒ‡å—**: å¼€æºè´¡çŒ®è§„èŒƒ

---

**é¡¹ç›®çŠ¶æ€**: ğŸŸ¢ ç”Ÿäº§å°±ç»ª  
**ç»´æŠ¤çŠ¶æ€**: ğŸŸ¢ ç§¯æç»´æŠ¤  
**ç¤¾åŒºçŠ¶æ€**: ğŸŸ¡ æ–‡æ¡£å®Œå–„ä¸­  

*æœ€åæ›´æ–°: 2025-07-07*
